{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ImportE2eKeysDialog.js","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.js"],"names":["ImportE2eKeysDialog","React","Component","constructor","props","super","ev","files","this","_file","current","setState","enableSubmit","_passphrase","value","length","preventDefault","_startImport","onFinished","_unmounted","createRef","state","phase","errStr","componentWillUnmount","file","passphrase","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","matrixClient","importRoomKeys","JSON","parse","catch","console","error","msg","friendlyText","_t","render","BaseDialog","sdk","disableForm","className","title","onSubmit","_onFormSubmit","htmlFor","ref","id","type","autoFocus","onChange","_onFormChange","disabled","size","onClick","_onCancelClick","PropTypes","instanceOf","MatrixClient","isRequired","func","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","Error","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","aesProm","hmacProm","all","String","fromCharCode","apply","btoa"],"mappings":"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","file":"bundles/3b75e5617009d13d08af/27.js","sourceRoot":""}