{"version":3,"sources":["webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.js","webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ExportE2eKeysDialog.js"],"names":["c","a","b","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","console","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","test","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","type","Blob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","subtleCrypto","crypto","subtle","webkitSubtle","friendlyError","msg","friendlyText","Error","cryptoFailMsg","_t","async","decryptMegolmKeyFile","data","password","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","length","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","aesProm","catch","hmacProm","Promise","all","String","fromCharCode","apply","btoa","ExportE2eKeysDialog","React","Component","constructor","props","super","ev","preventDefault","passphrase","this","_passphrase1","current","value","_passphrase2","setState","errStr","_startExport","onFinished","_unmounted","createRef","state","phase","componentWillUnmount","resolve","then","matrixClient","exportRoomKeys","MegolmExportEncryption","JSON","stringify","blob","FileSaver","render","BaseDialog","sdk","disableForm","className","onSubmit","_onPassphraseFormSubmit","htmlFor","ref","id","autoFocus","size","disabled","onClick","_onCancelClick","PropTypes","instanceOf","MatrixClient","isRequired","func"],"mappings":"8EAAA,sBAAwD,EAAO,QAAI,0BAAF,EAA8F,WAAW,aAA4T,SAASA,EAAEC,EAAEC,EAAEF,GAAG,IAAIG,EAAE,IAAIC,eAAeD,EAAEE,KAAK,MAAMJ,GAAGE,EAAEG,aAAa,OAAOH,EAAEI,OAAO,WAAWC,EAAEL,EAAEM,SAASP,EAAEF,IAAIG,EAAEO,QAAQ,WAAWC,QAAQC,MAAM,4BAA4BT,EAAEU,OAAO,SAASV,EAAEF,GAAG,IAAIC,EAAE,IAAIE,eAAeF,EAAEG,KAAK,OAAOJ,GAAE,GAAI,IAAIC,EAAEW,OAAO,MAAMZ,IAAI,OAAO,KAAKC,EAAEY,QAAQ,KAAKZ,EAAEY,OAAO,SAASC,EAAEd,GAAG,IAAIA,EAAEe,cAAc,IAAIC,WAAW,UAAU,MAAMjB,GAAG,IAAIE,EAAEgB,SAASC,YAAY,eAAejB,EAAEkB,eAAe,SAAQ,GAAG,EAAGC,OAAO,EAAE,EAAE,EAAE,GAAG,IAAG,GAAG,GAAG,GAAG,EAAG,EAAE,MAAMpB,EAAEe,cAAcd,IAAI,IAAIoB,EAAE,iBAAiBD,QAAQA,OAAOA,SAASA,OAAOA,OAAO,iBAAiBE,MAAMA,KAAKA,OAAOA,KAAKA,KAAK,iBAAiBC,GAAQA,EAAOA,SAASA,EAAOA,OAAO,EAAOvB,EAAEqB,EAAEG,WAAW,YAAYC,KAAKD,UAAUE,YAAY,cAAcD,KAAKD,UAAUE,aAAa,SAASD,KAAKD,UAAUE,WAAWnB,EAAEc,EAAEM,SAAS,iBAAiBP,QAAQA,SAASC,EAAE,aAAa,aAAaO,kBAAkBC,YAAY7B,EAAE,SAASC,EAAEM,EAAEuB,GAAG,IAAIC,EAAEV,EAAEW,KAAKX,EAAEY,UAAUC,EAAEjB,SAASkB,cAAc,KAAK5B,EAAEA,GAAGN,EAAEmC,MAAM,WAAWF,EAAEG,SAAS9B,EAAE2B,EAAEI,IAAI,WAAW,iBAAiBrC,GAAGiC,EAAEK,KAAKtC,EAAEiC,EAAEM,SAASC,SAASD,OAAO1B,EAAEoB,GAAGhC,EAAEgC,EAAEK,MAAMxC,EAAEE,EAAEM,EAAEuB,GAAGhB,EAAEoB,EAAEA,EAAEQ,OAAO,YAAYR,EAAEK,KAAKR,EAAEY,gBAAgB1C,GAAG2C,YAAW,WAAWb,EAAEc,gBAAgBX,EAAEK,QAAO,KAAKK,YAAW,WAAW9B,EAAEoB,KAAI,KAAK,qBAAqBV,UAAU,SAASH,EAAEd,EAAEuB,GAAG,GAAGvB,EAAEA,GAAGc,EAAEe,MAAM,WAAW,iBAAiBf,EAAEG,UAAUsB,iBAAnoD,SAAW9C,EAAEC,GAAG,YAAM,IAAoBA,EAAEA,EAAE,CAAC8C,SAAQ,GAAI,iBAAiB9C,IAAIS,QAAQsC,KAAK,sDAAsD/C,EAAE,CAAC8C,SAAS9C,IAAIA,EAAE8C,SAAS,6EAA6EtB,KAAKzB,EAAEiD,MAAM,IAAIC,KAAK,CAAC,SAASlD,GAAG,CAACiD,KAAKjD,EAAEiD,OAAOjD,EAAu2CC,CAAEoB,EAAES,GAAGvB,QAAQ,GAAGL,EAAEmB,GAAGtB,EAAEsB,EAAEd,EAAEuB,OAAO,CAAC,IAAIC,EAAEd,SAASkB,cAAc,KAAKJ,EAAEQ,KAAKlB,EAAEU,EAAEW,OAAO,SAASE,YAAW,WAAW9B,EAAEiB,QAAO,SAAS9B,EAAEC,EAAEY,EAAEP,GAAG,IAAGA,EAAEA,GAAGH,KAAK,GAAG,aAAcG,EAAEU,SAASkC,MAAM5C,EAAEU,SAASmC,KAAKC,UAAU,kBAAkB,iBAAiBpD,EAAE,OAAOF,EAAEE,EAAEC,EAAEY,GAAG,IAAIgB,EAAE,6BAA6B7B,EAAEgD,KAAKlB,EAAE,eAAeN,KAAKJ,EAAEiC,cAAcjC,EAAEkC,OAAOrB,EAAE,eAAeT,KAAKD,UAAUE,WAAW,IAAIQ,GAAGJ,GAAGC,GAAG/B,IAAI,oBAAoBwD,WAAW,CAAC,IAAIC,EAAE,IAAID,WAAWC,EAAEC,UAAU,WAAW,IAAI1D,EAAEyD,EAAEE,OAAO3D,EAAEkC,EAAElC,EAAEA,EAAE4D,QAAQ,eAAe,yBAAyBrD,EAAEA,EAAEkC,SAASF,KAAKvC,EAAEyC,SAASzC,EAAEO,EAAE,MAAMkD,EAAEI,cAAc5D,OAAO,CAAC,IAAI6D,EAAEzC,EAAEW,KAAKX,EAAEY,UAAU8B,EAAED,EAAEnB,gBAAgB1C,GAAGM,EAAEA,EAAEkC,SAASsB,EAAEtB,SAASF,KAAKwB,EAAExD,EAAE,KAAKqC,YAAW,WAAWkB,EAAEjB,gBAAgBkB,KAAI,QAAQ1C,EAAEM,OAAOpB,EAAEoB,OAAOpB,EAA+ByD,EAAOC,QAAQ1D,IAA1kF,iC,mDCAnE,wFAoBA,MAAM2D,EAAe9C,OAAO+C,OAAOC,QAAUhD,OAAO+C,OAAOE,aAU3D,SAASC,EAAcC,EAAKC,GACxB,MAAM1D,EAAI,IAAI2D,MAAMF,GAEpB,OADAzD,EAAE0D,aAAeA,EACV1D,EAGX,SAAS4D,IACL,OAAOC,YAAG,sEAYPC,eAAeC,EAAqBC,EAAMC,GAC7C,MAAM3B,EA6NV,SAA6B0B,GAIzB,MAAME,GAAU,IAAIC,aAAcC,OAAO,IAAIC,WAAWL,IAGxD,IAAIM,EAAY,EAChB,OAAU,CACN,MAAMC,EAAUL,EAAQM,QAAQ,KAAMF,GACtC,GAAIC,EAAU,EACV,MAAM,IAAIZ,MAAM,yBAEpB,MAAMc,EAAOP,EAAQQ,MAAMJ,EAAWC,GAASI,OAK/C,GAFAL,EAAYC,EAAQ,EAEhBE,IAASG,EACT,MAIR,MAAMC,EAAYP,EAGlB,OAAU,CACN,MAAMC,EAAUL,EAAQM,QAAQ,KAAMF,GAEtC,GAvCa,sCAsCAJ,EAAQQ,MAAMJ,EAAWC,EAAU,OAAIO,EAAYP,GAASI,OAErE,MAGJ,GAAIJ,EAAU,EACV,MAAM,IAAIZ,MAAM,0BAIpBW,EAAYC,EAAQ,EAGxB,MAAMQ,EAAUT,EAChB,OA+CJ,SAAsBU,GAElB,MAAMC,EAAe3E,OAAO4E,KAAKF,GAE3BG,EAAa,IAAId,WAAWY,EAAaG,QAC/C,IAAK,IAAInE,EAAI,EAAGA,EAAIgE,EAAaG,OAAQnE,IACrCkE,EAAWlE,GAAKgE,EAAaI,WAAWpE,GAE5C,OAAOkE,EAvDAG,CAAapB,EAAQQ,MAAMG,EAAWE,IAvQhCQ,CAAoBvB,GAC3BwB,EAAQC,IAAUC,MAAMF,MAG9B,GAAIlD,EAAK8C,OAAS,EACd,MAAM5B,EAAc,0BAChBK,YAAG,gCAAiC,CAAE2B,WAI9C,GAAgB,IADAlD,EAAK,GAEjB,MAAMkB,EAAc,sBAChBK,YAAG,gCAAiC,CAAE2B,WAG9C,MAAMG,EAAmBrD,EAAK8C,OAAL,GACzB,GAAIO,EAAmB,EACnB,MAAMnC,EAAc,0BAChBK,YAAG,gCAAiC,CAAE2B,WAG9C,MAAMI,EAAOtD,EAAKuD,SAAS,EAAG,IACxBC,EAAKxD,EAAKuD,SAAS,GAAI,IACvBE,EAAazD,EAAK,KAAO,GAAKA,EAAK,KAAO,GAAKA,EAAK,KAAO,EAAIA,EAAK,IACpE0D,EAAa1D,EAAKuD,SAAS,GAAI,GAAGF,GAClCM,EAAO3D,EAAKuD,UAAU,KAErBK,EAAQC,SAAiBC,EAAWR,EAAMG,EAAY9B,GACvDoC,EAAW/D,EAAKuD,SAAS,GAAI,IAEnC,IAAIS,EAgBAC,EAfJ,IACID,QAAgBlD,EAAaoD,OACzB,CAAElF,KAAM,QACR6E,EACAF,EACAI,GAEN,MAAOrG,GACL,MAAMwD,EAAc,+BAAiCxD,EAAG4D,KAE5D,IAAK0C,EACD,MAAM9C,EAAc,gBAChBK,YAAG,qDAIX,IACI0C,QAAkBnD,EAAaqD,QAC3B,CACInF,KAAM,UACNoF,QAASZ,EACTV,OAAQ,IAEZc,EACAF,GAEN,MAAOhG,GACL,MAAMwD,EAAc,gCAAkCxD,EAAG4D,KAG7D,OAAO,IAAIO,aAAcC,OAAO,IAAIC,WAAWkC,IAa5CzC,eAAe6C,EAAqB3C,EAAMC,EAAU2C,GAEvD,MAAMC,GADND,EAAUA,GAAW,IACKE,YAAc,IAElClB,EAAO,IAAIvB,WAAW,IAC5B/D,OAAO+C,OAAO0D,gBAAgBnB,GAE9B,MAAME,EAAK,IAAIzB,WAAW,IAC1B/D,OAAO+C,OAAO0D,gBAAgBjB,GAK9BA,EAAG,IAAM,IAET,MAAOI,EAAQC,SAAiBC,EAAWR,EAAMiB,EAAW5C,GACtD+C,GAAc,IAAIC,aAAcC,OAAOlD,GAE7C,IAAIgC,EACJ,IACIA,QAAmB5C,EAAa+D,QAC5B,CACI7F,KAAM,UACNoF,QAASZ,EACTV,OAAQ,IAEZc,EACAc,GAEN,MAAOhH,GACL,MAAMwD,EAAc,gCAAkCxD,EAAG4D,KAG7D,MAAMwD,EAAc,IAAI/C,WAAW2B,GAC7BqB,EAAc,EAAEzB,EAAKR,OAAOU,EAAGV,OAAO,EAAEgC,EAAYhC,OAAO,GAC3DkC,EAAe,IAAIjD,WAAWgD,GACpC,IAAIE,EAAM,EACVD,EAAaC,KAAS,EACtBD,EAAaE,IAAI5B,EAAM2B,GAAMA,GAAO3B,EAAKR,OACzCkC,EAAaE,IAAI1B,EAAIyB,GAAMA,GAAOzB,EAAGV,OACrCkC,EAAaC,KAASV,GAAa,GACnCS,EAAaC,KAAUV,GAAa,GAAM,IAC1CS,EAAaC,KAAUV,GAAa,EAAK,IACzCS,EAAaC,KAAqB,IAAZV,EACtBS,EAAaE,IAAIJ,EAAaG,GAAMA,GAAOH,EAAYhC,OAEvD,MAAMqC,EAASH,EAAazB,SAAS,EAAG0B,GAExC,IAAItB,EACJ,IACIA,QAAa7C,EAAasE,KACtB,CAAEpG,KAAM,QACR6E,EACAsB,GAEN,MAAOzH,GACL,MAAMwD,EAAc,6BAA+BxD,EAAG4D,KAG1D,MAAM+D,EAAY,IAAItD,WAAW4B,GAEjC,OADAqB,EAAaE,IAAIG,EAAWJ,GA4IhC,SAA2BvD,GAGvB,MACM4D,EAASC,KAAKC,KAAK9D,EAAKoB,OADT,IAEf2C,EAAQ,IAAIC,MAAMJ,EAAS,GACjCG,EAAM,GAAKnD,EACX,IACI3D,EADAgH,EAAI,EAER,IAAKhH,EAAI,EAAGA,GAAK2G,EAAQ3G,IACrB8G,EAAM9G,GAAKiH,EAAalE,EAAK6B,SAASoC,EAAGA,EAPxB,KAQjBA,GARiB,GAYrB,OAFAF,EAAM9G,KA5EW,oCA6EjB8G,EAAM9G,GAAK,IACH,IAAIgG,aAAcC,OAAOa,EAAMI,KAAK,OAAQC,OA1J7CC,CAAkBf,GAW7BxD,eAAesC,EAAWR,EAAMG,EAAY9B,GACxC,MAAMqE,EAAQ,IAAIC,KAElB,IAAIC,EAaAC,EAZJ,IACID,QAAYpF,EAAasF,UACrB,OACA,IAAIzB,aAAcC,OAAOjD,GACzB,CAAE3C,KAAM,WACR,EACA,CAAC,eAEP,MAAOtB,GACL,MAAMwD,EAAc,kCAAoCxD,EAAG4D,KAI/D,IACI6E,QAAgBrF,EAAauF,WACzB,CACIrH,KAAM,SACNsE,KAAMA,EACNG,WAAYA,EACZ6C,KAAM,WAEVJ,EACA,KAEN,MAAOxI,GACL,MAAMwD,EAAc,mCAAqCxD,EAAG4D,KAGhE,MAAMiF,EAAM,IAAIN,KAChB3I,QAAQkJ,IAAI,uCAAyCD,EAAMP,GAAS,MAEpE,MAAMpC,EAASuC,EAAQ/D,MAAM,EAAG,IAC1ByB,EAAUsC,EAAQ/D,MAAM,IAExBqE,EAAU3F,EAAasF,UACzB,MACAxC,EACA,CAAE5E,KAAM,YACR,EACA,CAAC,UAAW,YACd0H,MAAOhJ,IACL,MAAMwD,EAAc,8CAAgDxD,EAAG4D,OAGrEqF,EAAW7F,EAAasF,UAC1B,MACAvC,EACA,CACI7E,KAAM,OACNsH,KAAM,CAAEtH,KAAM,aAElB,EACA,CAAC,OAAQ,WACX0H,MAAOhJ,IACL,MAAMwD,EAAc,+CAAiDxD,EAAG4D,OAG5E,aAAasF,QAAQC,IAAI,CAACJ,EAASE,IAGvC,MAAMrE,EAAc,sCAuFpB,SAASsD,EAAa/C,GAGlB,MAAMF,EAAemE,OAAOC,aAAaC,MAAM,KAAMnE,GAErD,OAAO7E,OAAOiJ,KAAKtE,K,0LCpUR,MAAMuE,UAA4BC,IAAMC,UAMnDC,YAAYC,GACRC,MAAMD,GADS,mCAkBQE,IACvBA,EAAGC,iBAEH,MAAMC,EAAaC,KAAKC,aAAaC,QAAQC,MAC7C,OAAIJ,IAAeC,KAAKI,aAAaF,QAAQC,OACzCH,KAAKK,SAAS,CAAEC,OAAQ1G,YAAG,6BACpB,GAENmG,GAKLC,KAAKO,aAAaR,IACX,IALHC,KAAKK,SAAS,CAAEC,OAAQ1G,YAAG,mCACpB,KA5BI,0BAoEDiG,IACdA,EAAGC,iBACHE,KAAKL,MAAMa,YAAW,IACf,IApEPR,KAAKS,YAAa,EAElBT,KAAKC,aAAeS,sBACpBV,KAAKI,aAAeM,sBAEpBV,KAAKW,MAAQ,CACTC,MAlBO,EAmBPN,OAAQ,MAIhBO,uBACIb,KAAKS,YAAa,EAoBtBF,aAAaR,GAGTd,QAAQ6B,UAAUC,KAAK,IACZf,KAAKL,MAAMqB,aAAaC,kBAChCF,KAAMrI,GACEwI,IACHC,KAAKC,UAAU1I,GAAIqH,IAExBgB,KAAMzK,IACL,MAAM+K,EAAO,IAAIlJ,KAAK,CAAC7B,GAAI,CACvB4B,KAAM,gCAEVoJ,IAAU1K,OAAOyK,EAAM,oBACvBrB,KAAKL,MAAMa,YAAW,KACvBzB,MAAOhJ,IAEN,GADAJ,QAAQC,MAAM,4BAA6BG,GACvCiK,KAAKS,WACL,OAEJ,MAAMjH,EAAMzD,EAAE0D,cAAgBG,YAAG,iBACjCoG,KAAKK,SAAS,CACVC,OAAQ9G,EACRoH,MAnEG,MAuEXZ,KAAKK,SAAS,CACVC,OAAQ,KACRM,MAxEY,IAkFpBW,SACI,MAAMC,EAAaC,eAAiB,4BAE9BC,EArFU,IAqFK1B,KAAKW,MAAMC,MAEhC,OACI,kBAACY,EAAD,CAAYG,UAAU,yBAClBnB,WAAYR,KAAKL,MAAMa,WACvBpI,MAAOwB,YAAG,qBAEV,0BAAMgI,SAAU5B,KAAK6B,yBACjB,yBAAKF,UAAU,qBACX,2BACM/H,YACE,iQAOR,2BACMA,YACE,2UAQR,yBAAK+H,UAAU,SACT3B,KAAKW,MAAML,QAEjB,yBAAKqB,UAAU,+BACX,yBAAKA,UAAU,6BACX,yBAAKA,UAAU,+BACX,2BAAOG,QAAQ,eACTlI,YAAG,sBAGb,yBAAK+H,UAAU,8BACX,2BACII,IAAK/B,KAAKC,aACV+B,GAAG,cACHC,WAAW,EACXC,KAAK,KACLhK,KAAK,WACLiK,SAAUT,MAItB,yBAAKC,UAAU,6BACX,yBAAKA,UAAU,+BACX,2BAAOG,QAAQ,eACTlI,YAAG,wBAGb,yBAAK+H,UAAU,8BACX,2BAAOI,IAAK/B,KAAKI,aACb4B,GAAG,cACHE,KAAK,KACLhK,KAAK,WACLiK,SAAUT,QAM9B,yBAAKC,UAAU,qBACX,2BACIA,UAAU,oBACVzJ,KAAK,SACLiI,MAAOvG,YAAG,UACVuI,SAAUT,IAEd,4BAAQU,QAASpC,KAAKqC,eAAgBF,SAAUT,GAC1C9H,YAAG,e,IA7JZ2F,E,YACE,CACfyB,aAAcsB,IAAUC,WAAWC,KAAcC,WACjDjC,WAAY8B,IAAUI,KAAKD","file":"bundles/3b75e5617009d13d08af/4.js","sourceRoot":""}